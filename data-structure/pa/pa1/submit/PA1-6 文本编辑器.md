# PA1-6 文本编辑器

## 数据结构与算法

本程序使用使用游标数组实现带头尾哨兵的无向链表，仅记录每个节点的相邻节点而不明确记录哪个是前驱哪个是后继。链表中有左、右两个游标，游标中记录前驱后继节点，链表中还需记录游标的相对位置，有默认（左游标在左）、重合、反向（左游标在右）三种情形，链表类的私有成员变量如下

```c++
class List
{
private:
	enum CursorSide
	{
		left, right
	};
	enum CursorRelativePos
	{
		defalt,	//leftCursor left of rightCursor
		reversed,
		coincide
	};
	char* m_data;
	int* m_adj1, * m_adj2;	//default: adj1 is prev and adj2 is succ
	int m_dataHead, m_dataTail, m_freeStart;
	Cursor m_leftCursor, m_rightCursor;
	CursorRelativePos relativePos = defalt;
   	...
}
```

算法方面，可以实现通过某节点和其一相邻节点得到另一相邻节点，如此在知道前驱的情况下可以得后继，在知道后继的情况下可以得前驱。如此移动游标、插入、删除操作均可平凡地实现，需要注意游标相对位置可能会变化，而游标重合时的插入删除操作需要同时更改两个游标。由于采用了无向链表的数据结构并且记录了游标的相对位置，翻转的操作也易于实现，改变两游标附近元素的相邻元素即可。打印操作则是从头哨兵开始，得到它除了-1（表示该位置没有相邻元素）以外的另一个相邻元素开始遍历即可。

## 复杂度分析

设文本最长长度m，初始文本长度n，操作数N，则$ m=O(n+N) $

使用游标数组实现链表，空间复杂度$ O(m) $。时间复杂度方面，移动、插入、删除、翻转操作均为$ O(1) $，打印操作复杂度$ O(m) $，最差情况下（全是打印）复杂度为$ O(mN) $，而本题样例中打印操作较少，所以可以通过。

## 完成过程问题

该题无法使用普通的链表或者数组实现，我在咨询堵君懿小教员后使用了无向链表的数据结构，刚开始没有记录游标相对位置，发现无法判断能否实现翻转，后来便加入了游标相对位置变量，加入相对位置变量后，各种操作均可能对相对位置有潜在影响，情况比较复杂，经过多次调试之后才完成。

